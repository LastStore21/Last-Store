<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Last Store</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Segoe UI,Arial}
body{background:linear-gradient(135deg,#06142d,#0c2d63);color:#fff;}
header{background:#03102a;padding:20px;text-align:center;font-size:36px;font-weight:900;letter-spacing:2px;color:#00c3ff;box-shadow:0 5px 20px rgba(0,0,0,.6);position:sticky;top:0;z-index:1000;}
.container{max-width:1400px;margin:auto;padding:20px;}
.controls{display:flex;gap:12px;flex-wrap:wrap;margin-bottom:25px;}
.controls input,.controls select{flex:1;padding:12px;border-radius:10px;border:none;font-size:14px;}
.section{margin-bottom:45px;}
.section h2{margin-bottom:15px;border-left:6px solid #00c3ff;padding-left:12px;font-size:22px;}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:18px;}
.card{background:#0f2f6d;padding:18px;border-radius:14px;box-shadow:0 6px 20px rgba(0,0,0,.5);transition:.3s;display:flex;flex-direction:column;gap:8px;}
.card:hover{transform:translateY(-5px);background:#17449c;}
.price{color:#00e1ff;font-weight:bold;}
.qty-control{display:flex;justify-content:space-between;align-items:center;margin-top:6px;}
.qty-control button{width:36px;height:36px;border:none;border-radius:8px;background:#00c3ff;color:#fff;font-size:18px;cursor:pointer;}
.qty{font-weight:bold;font-size:16px;}
.summary{position:fixed;right:20px;bottom:110px;width:320px;background:#03102a;padding:18px;border-radius:14px;box-shadow:0 8px 25px rgba(0,0,0,.7);max-height:420px;overflow:auto;}
.summary h3{margin-bottom:10px;}
.summary-item{font-size:13px;margin-bottom:5px;}
.total-bar{position:fixed;bottom:0;left:0;width:100%;background:#020d22;padding:18px;display:flex;justify-content:space-between;align-items:center;box-shadow:0 -6px 20px rgba(0,0,0,.8);flex-wrap:wrap;gap:10px;}
.total{font-size:20px;font-weight:800;color:#00e1ff;}
.total-bar select{padding:10px;border-radius:8px;border:none;}
.send{background:linear-gradient(90deg,#00c3ff,#005eff);padding:12px 30px;border:none;border-radius:10px;color:white;font-weight:bold;cursor:pointer;}
</style>
</head>
<body>
<header>LAST STORE</header>
<div class="container">
<div class="controls">
<input type="text" id="search" placeholder="Search item...">
<select id="filter">
<option value="all">All Categories</option>
<option value="speed">Speed Ups</option>
<option value="combat">Combat</option>
<option value="boost">Boost</option>
<option value="resources">Resources</option>
<option value="chest">Chests</option>
<option value="building">Building</option>
<option value="familiar">Familiar</option>
<option value="monster">Monster Hunt</option>
</select>
</div>
<div id="items"></div>
<h3 style="margin-top:15px;">Upload Screenshots</h3>
<input type="file" id="images" multiple accept="image/*" style="margin-top:10px;">
<div id="preview" style="display:flex;flex-wrap:wrap;gap:10px;margin-top:10px;"></div>
<p style="font-size:12px;margin-top:10px;color:#ccc;">Note: Images will need to be sent manually in WhatsApp after redirection.</p>
</div>
<div class="summary">
<h3>Order Summary</h3>
<div id="summaryList"></div>
</div>
<div class="total-bar">
<div class="total">Total Gems: <span id="total">0</span></div>
<select id="seller">
<option value="51950501387">Seller 1</option>
<option value="5491167662445">Seller 2</option>
<option value="584245125670">Seller 3</option>
<option value="584121935238">Seller 4</option>
<option value="51955121605">Seller 5</option>
<option value="5493865820180">Seller 6</option>
<option value="573002560262">Seller 7</option>
</select>
<button class="send" onclick="sendOrder()">Send Order</button>
</div>
<script>
// TODOS LOS ART√çCULOS CON PRECIOS REALES DE LORDSGEMS
const data = {
speed:[
{name:"1 Hour Speed Up",price:130},
{name:"3 Hour Speed Up",price:300},
{name:"8 Hour Speed Up",price:650},
{name:"15 Hour Speed Up",price:1000},
{name:"24 Hour Speed Up",price:1500},
{name:"3 Day Speed Up",price:4400},
{name:"7 Day Speed Up",price:10000},
{name:"30 Day Speed Up",price:40000}
],
combat:[
{name:"Relocator",price:1500},
{name:"Random Relocator",price:500},
{name:"24h Shield",price:1000},
{name:"3d Shield",price:3500},
{name:"7d Shield",price:10000},
{name:"Braveheart",price:2000},
{name:"Anti-Scout 24h",price:600},
{name:"Anti-Scout 3d",price:1200},
{name:"Anti-Scout 7d",price:3000}
],
boost:[
{name:"Attack Boost 20% 12h",price:250},
{name:"Attack Boost 20% 24h",price:400},
{name:"Defense Boost 20% 12h",price:250},
{name:"Defense Boost 20% 24h",price:400},
{name:"Army Size Boost 20% 4h",price:2400},
{name:"Army Size Boost 50% 4h",price:5000},
{name:"Winged Boots 25%",price:500},
{name:"Winged Boots 50%",price:900},
{name:"Talent Reset",price:1000},
{name:"VIP Points",price:300}
],
resources:[
{name:"Food Pack 1M",price:10000},
{name:"Food Pack 5M",price:45000},
{name:"Wood Pack 1M",price:10000},
{name:"Wood Pack 5M",price:45000},
{name:"Stone Pack 1M",price:10000},
{name:"Stone Pack 5M",price:45000},
{name:"Ore Pack 1M",price:10000},
{name:"Ore Pack 5M",price:45000},
{name:"Gold Pack 1M",price:10000},
{name:"Gold Pack 5M",price:45000}
],
chest:[
{name:"Material Chest",price:1500},
{name:"Jewel Chest",price:6000},
{name:"Item Chest",price:3000}
],
building:[
{name:"Building Speed Up 1h",price:130},
{name:"Building Speed Up 3h",price:300},
{name:"Building Speed Up 8h",price:650}
],
familiar:[
{name:"Familiar Energy 5000",price:1125},
{name:"Familiar Energy 10000",price:2000},
{name:"Familiar Energy 20000",price:3500},
{name:"Familiar Energy 50000",price:7500}
],
monster:[
{name:"Monster Hunt Energy 5000",price:1125},
{name:"Monster Hunt Energy 10000",price:2000},
{name:"Monster Hunt Energy 20000",price:3500},
{name:"Monster Hunt Energy 50000",price:7500}
];
// ===== VARIABLES =====
let cart = {};
const imageInput = document.getElementById("images");
const preview = document.getElementById("preview");

// ===== FORMATO NUM√âRICO =====
function format(n){
    return n.toLocaleString();
}

// ===== RENDER ITEMS =====
function render(){
    const container = document.getElementById("items");
    container.innerHTML = "";

    for(const cat in data){
        const section = document.createElement("div");
        section.className = "section";
        section.dataset.cat = cat;
        section.innerHTML = `<h2>${cat.toUpperCase()}</h2><div class="grid"></div>`;

        data[cat].forEach(item=>{
            const safeId = item.name.replace(/[^a-zA-Z0-9]/g,"_");

            const card = document.createElement("div");
            card.className = "card";
            card.innerHTML = `
                <h3>${item.name}</h3>
                <div class="price">${format(item.price)} Gems</div>
                <div class="qty-control">
                    <button onclick="update('${safeId}',-1)">-</button>
                    <div class="qty" id="${safeId}">0</div>
                    <button onclick="update('${safeId}',1)">+</button>
                </div>
            `;
            section.querySelector(".grid").appendChild(card);
        });

        container.appendChild(section);
    }
}

// ===== ACTUALIZAR CANTIDAD =====
function update(id, change){
    if(!cart[id]) cart[id] = 0;
    cart[id] += change;
    if(cart[id] < 0) cart[id] = 0;

    document.getElementById(id).innerText = cart[id];
    updateSummary();
}

// ===== RESUMEN =====
function updateSummary(){
    let total = 0;
    let summary = "";

    for(const cat in data){
        data[cat].forEach(item=>{
            const id = item.name.replace(/[^a-zA-Z0-9]/g,"_");
            if(cart[id] > 0){
                let subtotal = cart[id] * item.price;
                total += subtotal;
                summary += `<div class="summary-item">${item.name} x${cart[id]} = ${format(subtotal)}</div>`;
            }
        });
    }

    document.getElementById("summaryList").innerHTML = summary;
    document.getElementById("total").innerText = format(total);
}

// ===== BUSCADOR =====
document.getElementById("search").addEventListener("input", function(){
    const value = this.value.toLowerCase();
    document.querySelectorAll(".card").forEach(card=>{
        card.style.display = card.innerText.toLowerCase().includes(value) ? "block" : "none";
    });
});

// ===== FILTRO CATEGOR√çA =====
document.getElementById("filter").addEventListener("change", function(){
    const value = this.value;
    document.querySelectorAll(".section").forEach(sec=>{
        if(value === "all"){
            sec.style.display = "block";
        } else {
            sec.style.display = sec.dataset.cat === value ? "block" : "none";
        }
    });
});

// ===== PREVIEW IM√ÅGENES =====
imageInput.addEventListener("change", function(){
    preview.innerHTML = "";
    Array.from(this.files).forEach(file=>{
        const reader = new FileReader();
        reader.onload = function(e){
            const img = document.createElement("img");
            img.src = e.target.result;
            img.style.width = "80px";
            img.style.borderRadius = "8px";
            preview.appendChild(img);
        };
        reader.readAsDataURL(file);
    });
});

// ===== ENVIAR A WHATSAPP =====
function sendOrder(){
    let msg = "üî• LAST STORE ORDER üî•%0A%0A";
    let total = 0;

    for(const cat in data){
        data[cat].forEach(item=>{
            const id = item.name.replace(/[^a-zA-Z0-9]/g,"_");
            if(cart[id] > 0){
                msg += item.name + " x" + cart[id] + "%0A";
                total += cart[id] * item.price;
            }
        });
    }

    if(imageInput.files.length > 0){
        msg += "%0AClient will send " + imageInput.files.length + " screenshot(s) after this message.%0A";
    }

    msg += "%0ATotal Gems: " + format(total);

    const seller = document.getElementById("seller").value;
    window.location.href = "https://wa.me/" + seller + "?text=" + msg;
}

// ===== INICIAR =====
render();
</script>
</body>
</html>
